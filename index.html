<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="UTF-8">
<title>Malla Curricular Arquitectura</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase SDK (compat ‚Äî m√°s simple) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDGFEsBWnEHP3luKaeaFzUe_Nguqz3j_pA",
  authDomain: "malla-curricular-arquitectura.firebaseapp.com",
  projectId: "malla-curricular-arquitectura",
  storageBucket: "malla-curricular-arquitectura.appspot.com",
  messagingSenderId: "613677284410",
  appId: "1:613677284410:web:3c0d68721e74f054378903"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
</script>

<style>/* ======= GENERAL ======= */
body{
  font-family: Arial;
  background:#f3f7ec;
  margin:0;
  padding:0;
  color:#334;
  text-align:center;
}

/* T√≠tulo general */
h1{
  margin-top:30px;
  color:#6b7f39;
  font-size:34px;
  letter-spacing:2px;
}

/* ======= CONTENEDOR DE COLUMNAS ======= */
.malla{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:35px;
  padding:30px 10px;
}

/* ======= TARJETAS DE A√ëO ======= */
.ano{
  background:#edf4e2;
  width:330px;
  border-radius:22px;
  padding:18px 20px 25px;
  box-shadow:0 8px 16px rgba(0,0,0,.08);
  transition:.2s;
}

.ano:hover{
  transform:scale(1.01);
}

/* A√±o */
.ano h2{
  color:#6f8341;
  margin-bottom:10px;
}

/* L√≠nea separadora */
.ano hr{
  opacity:.3;
}

/* ======= TITULOS DE SEMESTRE ======= */
.semestre h3{
  background:#dbe8c9;
  padding:10px;
  border-radius:14px;
  color:#4b5e2e;
  margin-top:10px;
}

/* ======= MATERIAS ======= */
.materia{
  background:white;
  margin:7px 0;
  padding:9px 10px;
  border-radius:14px;
  cursor:pointer;
  transition:.2s;
  font-size:14px;
}

.materia:hover{
  background:#eef3e7;
}

/* ======= APROBADAS ======= */
.aprobada{
  background:#7da96b !important;
  color:white;
  text-decoration:line-through;
  font-style:italic;
}

/* ======= BLOQUEADAS ======= */
.bloqueada{
  background:#ddd;
  color:#777;
  cursor:not-allowed;
}

/* ======= BARRA DE PROGRESO ======= */
.progreso-barra{
  width:70%;
  height:14px;
  background:#d4dfc6;
  border-radius:20px;
  margin:10px auto 20px;
}

#barra{
  height:100%;
  background:#7da96b;
  border-radius:20px;
}

/* ======= BOT√ìN ======= */
button{
  background:#7da96b;
  color:white;
  border:none;
  padding:10px 18px;
  border-radius:12px;
  margin-top:15px;
  cursor:pointer;
}

button:hover{
  opacity:.85;
}

/* ======= RESPONSIVE ======= */
@media(max-width:900px){
  .malla{ gap:18px; }
  .ano{ width:90%; }
}

</style>
</head>

<body>

<div id="auth">
  <button onclick="loginGoogle()">Iniciar sesi√≥n con Google</button>
  <button onclick="logout()">Cerrar sesi√≥n</button>
</div>

<h1>MALLA CURRICULAR ARQUITECTURA</h1>

<div class="progreso-box">
  <p id="porcentaje">Progreso: 0%</p>
  <div class="progreso-barra"><div id="barra"></div></div>
  <p id="mensaje"></p>
  <button onclick="reiniciar()">Reiniciar progreso</button>
</div>

<div class="malla" id="malla"></div>

<script>
let usuario = null;

auth.onAuthStateChanged(u => {
  usuario = u;
  render();
});

function loginGoogle(){
  const provider=new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider);
}

function logout(){
  auth.signOut();
}

const mensajes = [
 {p:0,m:"Todo gran proyecto empieza con una idea üå±"},
 {p:10,m:"Vas tomando forma, sigue as√≠ ‚úèÔ∏è"},
 {p:25,m:"Ya est√°s construyendo bases s√≥lidas üß±"},
 {p:50,m:"Mitad del camino, tu esfuerzo se nota üíö"},
 {p:75,m:"Casi arquitecta, no te detengas üèóÔ∏è"},
 {p:90,m:"Est√°s muy cerca del sue√±o ‚ú®"},
 {p:100,m:"¬°LO LOGRASTE! Arquitecta en proceso üéì"}
];
  
const data = [
{a√±o:"A√ëO 1", semestres:[
{nombre:"1¬∞ SEMESTRE", materias:[
"Dise√±o Arquitect√≥nico 1","Composici√≥n Arquitect√≥nica 1","Introducci√≥n A La Teor√≠a",
"Arte: Antig√ºedad A S. XVIII","Representaci√≥n Arquitect√≥nica 1",
"Introducci√≥n A La Edificaci√≥n","Matem√°tica Aplicada"]},
{nombre:"2¬∞ SEMESTRE", materias:[
{n:"F√≠sica Aplicada",p:["Matem√°tica Aplicada"]},
{n:"Dise√±o Arquitect√≥nico 2",p:["Dise√±o Arquitect√≥nico 1","Composici√≥n Arquitect√≥nica 1","Introducci√≥n A La Teor√≠a","Representaci√≥n Arquitect√≥nica 1","Introducci√≥n A La Edificaci√≥n"]},
{n:"Composici√≥n Arquitect√≥nica 2",p:["Composici√≥n Arquitect√≥nica 1","Dise√±o Arquitect√≥nico 1"]},
{n:"Sistemas Constructivos B√°sicos",p:["Introducci√≥n A La Edificaci√≥n"]},
{n:"Arte: Moderno Y Contempor√°neo",p:["Arte: Antig√ºedad A S. XVIII"]},
{n:"Topograf√≠a",p:["Introducci√≥n A La Edificaci√≥n","Matem√°tica Aplicada"]},
"Dibujo A Mano Alzada"]},
{nombre:"VERANO", materias:[
{n:"Taller De Dise√±o Arquitect√≥nico 1",p:["Representaci√≥n Arquitect√≥nica 1","Dise√±o Arquitect√≥nico 2"]},
"Taller De Visualizaci√≥n","Geom√°tica"]}]},
{a√±o:"A√ëO 2", semestres:[
{nombre:"1¬∞ SEMESTRE", materias:[
"Espa√±ol",
{n:"Dise√±o Arquitect√≥nico 3",p:["Introducci√≥n A La Teor√≠a","Dise√±o Arquitect√≥nico 2","Composici√≥n Arquitect√≥nica 2","Sistemas Constructivos B√°sicos","Topograf√≠a","Taller De Dise√±o Arquitect√≥nico 1"]},
{n:"Interpretaci√≥n De La Arquitectura",p:["Introducci√≥n A La Teor√≠a"]},
{n:"Representaci√≥n Arquitect√≥nica 2",p:["Representaci√≥n Arquitect√≥nica 1"]},
{n:"Tecnolog√≠a Del Hormig√≥n Armado",p:["Introducci√≥n A La Edificaci√≥n","Sistemas Constructivos B√°sicos"]},
{n:"Modelos Estructurales",p:["F√≠sica Aplicada"]},
"Introducci√≥n A La Investigaci√≥n"]},
{nombre:"2¬∞ SEMESTRE", materias:[
"Ingl√©s",
{n:"Sociedad Medio Ambiente Y Des.",p:["Dise√±o Arquitect√≥nico 3","Introducci√≥n A La Edificaci√≥n"]},
{n:"Dise√±o Arquitect√≥nico 4",p:["Dise√±o Arquitect√≥nico 3","Interpretaci√≥n De La Arquitectura","Representaci√≥n Arquitect√≥nica 2","Tecnolog√≠a Del Hormig√≥n Armado"]},
{n:"Textos Y Contextos De La Arq. Latinoamericana",p:["Interpretaci√≥n De La Arquitectura"]},
{n:"Representaci√≥n Arquitect√≥nica 3",p:["Representaci√≥n Arquitect√≥nica 2"]},
{n:"Sistemas Constructivos Especiales",p:["Tecnolog√≠a Del Hormig√≥n Armado"]},
{n:"An√°lisis Estructural",p:["Modelos Estructurales"]}]},
{nombre:"VERANO", materias:[
{n:"Taller De Dise√±o Arquitect√≥nico 2",p:["Taller De Dise√±o Arquitect√≥nico 1","Dise√±o Arquitect√≥nico 4","Representaci√≥n Arquitect√≥nica 3","Sistemas Constructivos Especiales"]},
"Electiva 1","Electiva 2"]}]},
{a√±o:"A√ëO 3", semestres:[
{nombre:"1¬∞ SEMESTRE", materias:[
"Historia De Pma En El Mundo Global",
{n:"Dise√±o Arquitect√≥nico 5",p:["Dise√±o Arquitect√≥nico 4","Textos Y Contextos De La Arq. Latinoamericana","Representaci√≥n Arquitect√≥nica 3","Sistemas Constructivos Especiales","Taller De Dise√±o Arquitect√≥nico 2"]},
{n:"Cr√≠tica De La Arquitectura Y Pensamiento Contempor√°neo",p:["Textos Y Contextos De La Arq. Latinoamericana"]},
{n:"Representaci√≥n Arquitect√≥nica 4",p:["Representaci√≥n Arquitect√≥nica 3"]},
{n:"Sistemas Constructivos Complejos",p:["Sistemas Constructivos Especiales"]},
{n:"Instalaciones Para Edificio 1",p:["F√≠sica Aplicada"]},
{n:"Espacios Abiertos Vecinales",p:["Sociedad Medio Ambiente Y Des.","Topograf√≠a","Introducci√≥n A La Investigaci√≥n","Dise√±o Arquitect√≥nico 4"]}]},
{nombre:"2¬∞ SEMESTRE", materias:[
"Geograf√≠a De Panam√°",
{n:"Dise√±o Arquitect√≥nico 6",p:["Dise√±o Arquitect√≥nico 5","Cr√≠tica De La Arquitectura Y Pensamiento Contempor√°neo","Representaci√≥n Arquitect√≥nica 4","Sistemas Constructivos Complejos","Instalaciones Para Edificio 1"]},
{n:"Arquitectura Y Ciudad 1",p:["Arte: Moderno Y Contempor√°neo"]},
{n:"Representaci√≥n Arquitect√≥nica 5",p:["Representaci√≥n Arquitect√≥nica 4"]},
{n:"Gesti√≥n De Seguridad Y Salud Ocupacional",p:["Sistemas Constructivos Complejos"]},
{n:"Instalaciones Para Edificio 2",p:["Instalaciones Para Edificio 1"]},
{n:"Ciudad Y Comunidad",p:["Dise√±o Arquitect√≥nico 5","Espacios Abiertos Vecinales"]}]},
{nombre:"VERANO", materias:[
{n:"Taller De Dise√±o Arquitect√≥nico 3",p:["Taller De Dise√±o Arquitect√≥nico 2","Sistemas Constructivos Complejos","Dise√±o Arquitect√≥nico 5","Representaci√≥n Arquitect√≥nica 5"]},
{n:"Pr√°ctica Supervisada 1",p:["Gesti√≥n De Seguridad Y Salud Ocupacional"]},
"Optativa 1"]}]},
{a√±o:"A√ëO 4", semestres:[
{nombre:"1¬∞ SEMESTRE", materias:[
{n:"Dise√±o Arquitect√≥nico 7",p:["Sistemas Constructivos Complejos","Dise√±o Arquitect√≥nico 6","Instalaciones Para Edificio 2","Taller De Dise√±o Arquitect√≥nico 3","Representaci√≥n Arquitect√≥nica 5"]},
{n:"Arquitectura Y Ciudad 2",p:["Arquitectura Y Ciudad 1"]},
{n:"Representaci√≥n Arquitect√≥nica 6",p:["Representaci√≥n Arquitect√≥nica 5"]},
{n:"Taller De Planos Y Especificaciones",p:["Introducci√≥n A La Investigaci√≥n"]},
{n:"Dise√±o Estructural Simplificado",p:["An√°lisis Estructural","Sistemas Constructivos Complejos"]},
{n:"Instalaciones Para Edificio 3",p:["Instalaciones Para Edificio 2"]},
{n:"Urbanismo",p:["Geom√°tica","Dise√±o Arquitect√≥nico 6","Ciudad Y Comunidad"]}]},
{nombre:"2¬∞ SEMESTRE", materias:[
{n:"Dise√±o Arquitect√≥nico 8",p:["Dise√±o Arquitect√≥nico 7","Representaci√≥n Arquitect√≥nica 6","Dise√±o Estructural Simplificado","Instalaciones Para Edificio 3"]},
{n:"Arquitectura Y Ciudad 3",p:["Arquitectura Y Ciudad 2"]},
{n:"Presupuesto De Obra",p:["Sistemas Constructivos Complejos","Taller De Planos Y Especificaciones"]},
{n:"Estructuras Especiales",p:["Dise√±o Estructural Simplificado"]},
{n:"Instalaciones Para Edificios 4",p:["Instalaciones Para Edificio 3"]},
{n:"Espacios Abiertos Urbanos",p:["Dise√±o Arquitect√≥nico 7","Urbanismo"]},
{n:"Metodolog√≠a Para La Elaboraci√≥n De Tesis",p:["Dise√±o Arquitect√≥nico 7","Arquitectura Y Ciudad 2","Representaci√≥n Arquitect√≥nica 6","Taller De Planos Y Especificaciones","Dise√±o Estructural Simplificado","Instalaciones Para Edificio 3","Urbanismo"]}]},
{nombre:"VERANO", materias:[
{n:"Taller De Urbanismo",p:["Dise√±o Arquitect√≥nico 8","Espacios Abiertos Urbanos"]},
{n:"Pr√°ctica Supervisada 2",p:["Pr√°ctica Supervisada 1"]},
"Optativa 2"]}]},
{a√±o:"A√ëO 5", semestres:[
{nombre:"1¬∞ SEMESTRE", materias:[
"Hist. De Las Relaciones De Pma Con Los EE.UU. I",
{n:"Dise√±o Arquitect√≥nico 9",p:["Dise√±o Arquitect√≥nico 8","Estructuras Especiales","Instalaciones Para Edificios 4"]},
{n:"Arquitectura Y Ciudad 4",p:["Arquitectura Y Ciudad 3"]},
{n:"Programaci√≥n Y Control De PYT",p:["Taller De Planos Y Especificaciones","Presupuesto De Obra"]},
{n:"Gesti√≥n Profesional",p:["Dise√±o Arquitect√≥nico 8","Pr√°ctica Supervisada 2"]},
{n:"Ciudad Y Territorio",p:["Taller De Urbanismo"]},
"Trabajo De Graduaci√≥n 1"]},
{nombre:"2¬∞ SEMESTRE", materias:[
"Hist. De Las Relaciones De Pma Con Los EE.UU. II",
{n:"Dise√±o Arquitect√≥nico 10",p:["Dise√±o Arquitect√≥nico 9"]},
{n:"Patrimonio Arquitect√≥nico",p:["Arquitectura Y Ciudad 4"]},
{n:"Gesti√≥n Y Mantenimiento De Edificios",p:["Pr√°ctica Supervisada 2","Programaci√≥n Y Control De PYT"]},
{n:"Pr√°ctica Supervisada 3",p:["Representaci√≥n Arquitect√≥nica 6","Pr√°ctica Supervisada 2","Dise√±o Arquitect√≥nico 9","Programaci√≥n Y Control De PYT","Gesti√≥n Profesional","Ciudad Y Territorio"]},
{n:"Gesti√≥n Urbana Y Territorial",p:["Taller De Urbanismo","Dise√±o Arquitect√≥nico 9","Gesti√≥n Profesional","Ciudad Y Territorio"]},
{n:"Trabajo De Graduaci√≥n 2",p:["Trabajo De Graduaci√≥n 1"]}]}]}];

async function render(){
const m=document.getElementById("malla");
m.innerHTML="";
let total=0,ok=0;

let materiasAprobadas = {};

/* ---- TU DATA IGUAL ---- */
</script>

<script>
async function render(){

const m=document.getElementById("malla");
m.innerHTML="";
let total=0,ok=0;

let materiasAprobadas={};

if(usuario){
 const snap = await db.collection("usuarios")
   .doc(usuario.uid)
   .collection("materias")
   .get();

 snap.forEach(d=>materiasAprobadas[d.id]=true);
}

data.forEach(a=>{
 const d=document.createElement("div");
 d.className="ano";
 d.innerHTML=`<h2>${a.a√±o}</h2>`;

 a.semestres.forEach(s=>{
  const sd=document.createElement("div");
  sd.className="semestre";
  sd.innerHTML=`<h3>${s.nombre}</h3>`;

  s.materias.forEach(x=>{
   total++;

   let nombre=typeof x==="string"?x:x.n;
   let p=typeof x==="string"?[]:x.p;

   const div=document.createElement("div");
   div.className="materia";
   div.textContent=nombre;

   const aprobado = materiasAprobadas[nombre];
   if(aprobado){div.classList.add("aprobada");ok++;}

   const faltan = p.filter(r=>!materiasAprobadas[r]);
   if(faltan.length){
     div.classList.add("bloqueada");
     div.dataset.tooltip="Falta: "+faltan.join(", ");
   }

   div.onclick=async ()=>{
     if(!usuario) return alert("Inicia sesi√≥n üíö");
     if(faltan.length) return;

     if(aprobado){
       await db.collection("usuarios").doc(usuario.uid)
        .collection("materias").doc(nombre).delete();
     } else {
       await db.collection("usuarios").doc(usuario.uid)
        .collection("materias").doc(nombre).set({ok:true});
     }

     render();
   };

   sd.appendChild(div);
  });

  d.appendChild(sd);
 });

 m.appendChild(d);
});

const pct=Math.round(ok/total*100);
document.getElementById("barra").style.width=pct+"%";
document.getElementById("porcentaje").textContent="Progreso: "+pct+"%";

let msg=mensajes[0].m;
mensajes.forEach(x=>{if(pct>=x.p)msg=x.m});
document.getElementById("mensaje").textContent=msg;

}

function reiniciar(){
 if(!usuario)return alert("Inicia sesi√≥n");
 if(confirm("¬øBorrar progreso?")){
  db.collection("usuarios").doc(usuario.uid).collection("materias")
  .get().then(snap=>{
    snap.forEach(d=>d.ref.delete());
    render();
  });
 }
}

render();
</script>

</body>
</html>
}

render();
</script>

</body>
</html>
